
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <!-- Licensed under the Apache 2.0 License -->
  <link rel="stylesheet" type="text/css" href="../_static/fonts/open-sans/stylesheet.css" />
  <!-- Licensed under the SIL Open Font License -->
  <link rel="stylesheet" type="text/css" href="../_static/fonts/source-serif-pro/source-serif-pro.css" />
  <link rel="stylesheet" type="text/css" href="../_static/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="../_static/css/bootstrap-theme.min.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>Build Instructions &#8212; Open Network Install Environment  documentation</title>
    <link rel="stylesheet" href="../_static/guzzle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="shortcut icon" href="../_static/onie-favicon-16x16.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Basic Debugging" href="debugging.html" />
    <link rel="prev" title="For Developers" href="index.html" />
  
   

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="debugging.html" title="Basic Debugging"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="For Developers"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Open Network Install Environment  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">For Developers</a> &#187;</li> 
      </ul>
    </div>
    <div class="container-wrapper">

      <div id="mobile-toggle">
        <a href="#"><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span></a>
      </div>
  <div id="left-column">
    <div class="sphinxsidebar">
  <a href="
      ../index.html" class="logo">
  
  <img src="../_static/ONIE-logo-green-160x60.png" class="logo" />
  </a>
  <center><a href="https://github.com/opencomputeproject/onie" class="logo">
  <svg class="octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
  opencomputeproject/onie</a></center>

<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <h2>Table Of Contents</h2>
  </div>
  <div class="sidebar-toc">
    
    
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../download/index.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community/index.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../news/index.html">News</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-guide/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design-spec/index.html">Design Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing/index.html">Unit Testing</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">For Developers</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Build Instructions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#source-code-description">Source Code Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="debugging.html">Basic Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html">Contributing to ONIE</a></li>
<li class="toctree-l2"><a class="reference internal" href="porting.html">Porting Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="demo_os.html">Demo OS Installer and OS Runtime</a></li>
<li class="toctree-l2"><a class="reference internal" href="demo_diag.html">Demo Diagnostic OS Installer</a></li>
<li class="toctree-l2"><a class="reference internal" href="multiple_cpu.html">Machines That Share a Common CPU Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="release.html">Source Code Release Cycle</a></li>
<li class="toctree-l2"><a class="reference internal" href="project_lead_tasks.html">Project Lead Tasks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cli/index.html">Command Line Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">FAQ</a></li>
</ul>

    
  </div>
</div>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <h2>Contents</h2>
    <div class="sidebar-localtoc">
      <ul>
<li><a class="reference internal" href="#">Build Instructions</a><ul>
<li><a class="reference internal" href="#branches-and-build-environment-compatibility">Branches and Build Environment Compatibility</a></li>
<li><a class="reference internal" href="#preparing-an-onie-build-environment">Preparing an ONIE Build Environment</a><ul>
<li><a class="reference internal" href="#dedicated-user-environment-docker-images">Dedicated User Environment Docker Images</a></li>
<li><a class="reference internal" href="#traditional-docker-image">Traditional Docker Image</a></li>
</ul>
</li>
<li><a class="reference internal" href="#preparing-a-new-build-machine">Preparing a New Build Machine</a><ul>
<li><a class="reference internal" href="#debian-systems">Debian Systems</a></li>
</ul>
</li>
<li><a class="reference internal" href="#preparing-a-new-build-user-account">Preparing a New Build User Account</a></li>
<li><a class="reference internal" href="#machine-definition-files">Machine Definition Files</a></li>
<li><a class="reference internal" href="#cross-compiler-toolchain">Cross-Compiler Toolchain</a></li>
<li><a class="reference internal" href="#cross-compiling-onie">Cross-Compiling ONIE</a></li>
<li><a class="reference internal" href="#installing-the-onie-binary">Installing the ONIE Binary</a></li>
</ul>
</li>
<li><a class="reference internal" href="#source-code-description">Source Code Description</a><ul>
<li><a class="reference internal" href="#source-code-layout">Source Code Layout</a></li>
<li><a class="reference internal" href="#machine-definition-directory">Machine Definition Directory</a></li>
<li><a class="reference internal" href="#rootconf-directory"><code class="docutils literal notranslate"><span class="pre">rootconf</span></code> Directory</a></li>
</ul>
</li>
</ul>

    </div>
  </div>
</div>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <div id="main-search">
      <form class="form-inline" action="../search.html" method="GET" role="form">
        <div class="input-group">
          <input name="q" type="text" class="form-control" placeholder="Search...">
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div>
      
    </div>
  </div>
        <div id="right-column">
          
          <div role="navigation" aria-label="breadcrumbs navigation">
            <ol class="breadcrumb">
              <li><a href="../index.html">Home</a></li>
              
                <li><a href="index.html">For Developers</a></li>
              
              <li>Build Instructions</li>
            </ol>
          </div>
          
          <div class="document clearer body">
            
  <div class="section" id="build-instructions">
<h1>Build Instructions<a class="headerlink" href="#build-instructions" title="Permalink to this headline">¶</a></h1>
<div class="section" id="branches-and-build-environment-compatibility">
<h2>Branches and Build Environment Compatibility<a class="headerlink" href="#branches-and-build-environment-compatibility" title="Permalink to this headline">¶</a></h2>
<p>Be aware: the master branch, from release
<a class="reference external" href="https://github.com/opencomputeproject/onie/tree/2021.11">2021.11</a>
on contains upgraded software components that break backwards compatibility
with most machine builds and require a Debian 10 build environment.
For clarity, a list of ONIE branches and build environments for all machine targets is maintained here:
<a class="reference external" href="https://github.com/opencomputeproject/onie/blob/master/build-config/scripts/onie-build-targets.json">onie/build-config/scripts/onie-build-targets.json</a></p>
<p>For some context about the upgrade process, see the <a class="reference external" href="https://www.youtube.com/watch?v=8H4S7eSZWJ4">2021 ONIE Status Update</a></p>
<p>Machine targets that have not yet been upgraded for the master branch, can still be built
from the <a class="reference external" href="https://github.com/opencomputeproject/onie/tree/2021.08">2021.08 release</a>
branch or the Debian9BuildEnvironment tag by using a Debian 9 build environment.
This process can be made much easier by using a Docker container - see below.</p>
</div>
<div class="section" id="preparing-an-onie-build-environment">
<h2>Preparing an ONIE Build Environment<a class="headerlink" href="#preparing-an-onie-build-environment" title="Permalink to this headline">¶</a></h2>
<p>ONIE build environments can be either configured directly on the
host machine (see “Preparing a New Build Machine” below) or run
in <a class="reference external" href="http://www.docker.com">Docker</a> containers for systems that have
either docker.io (from Debian) or docker-ce (from Docker) installed.</p>
<p>The latter approach is preferred, as building ONIE will require build
environments based off of Debian 10 Buster for the 2021.11 release
on, or Debian 9 Stretch for backwards compatible builds before the
<a class="reference external" href="https://github.com/opencomputeproject/onie/tree/2021.08">2021.08 release</a>,</p>
<div class="section" id="dedicated-user-environment-docker-images">
<h3>Dedicated User Environment Docker Images<a class="headerlink" href="#dedicated-user-environment-docker-images" title="Permalink to this headline">¶</a></h3>
<p>Since developing while logged in to a Docker container can be frustrating,
in that a developer’s configuration isn’t present, host file systems
have to be explicitly mounted to save files, etc, ONIE build images
are available with Dedicated User Environment <a class="reference external" href="https://github.com/cumulusnetworks/DUE">DUE</a></p>
<p>DUE is the recommended environment for building ONIE as
it has been used for debug and release generation since 2019.</p>
<p>This MIT licensed open source project can create Docker (or Podman) ONIE
build environments from different Debian releases, and preserves the
user’s identity and home directory while running them, creating the
experience of very little changing from a developers native environment.
Additionally, users will be building in the same environment that has
been used to build ONIE releases, vastly simplifying the
process of debugging build issues.</p>
<p>While DUE is available via apt in Debian 11 Bullseye, the source code
<a class="reference external" href="https://github.com/cumulusnetworks/DUE">https://github.com/cumulusnetworks/DUE</a>
can be run from its checkout directory on Red Hat and Ubuntu systems as well.</p>
<p>To get started with DUE, configuration instructions can be found at
<a class="reference external" href="https://github.com/CumulusNetworks/DUE/tree/master/templates/onie">ONIE build environment creation example</a>, and there is a video tutorial available at this <a class="reference external" href="https://www.youtube.com/watch?v=evzkiiRRIvw">YouTube link</a>.</p>
</div>
<div class="section" id="traditional-docker-image">
<h3>Traditional Docker Image<a class="headerlink" href="#traditional-docker-image" title="Permalink to this headline">¶</a></h3>
<p>If you want to use Docker containers without DUE, the ONIE project
provides a Debian build environment as a Docker image.  For more
info, see the <a class="reference external" href="https://github.com/opencomputeproject/onie/tree/master/contrib/build-env">Docker image README</a>.</p>
<p>That is a good starting point, but for long term development you may
want to install the development packages natively on your system.
Have a look at the top-level <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> and the
<code class="docutils literal notranslate"><span class="pre">$(DEBIAN_BUILD_HOST_PACKAGES)</span></code> variable.  Then install the
corresponding packages for your distribution that provide the same
tools.</p>
</div>
</div>
<div class="section" id="preparing-a-new-build-machine">
<h2>Preparing a New Build Machine<a class="headerlink" href="#preparing-a-new-build-machine" title="Permalink to this headline">¶</a></h2>
<p>The ONIE build environment requires a number of standard development
packages.</p>
<p>For a <a class="reference external" href="http://www.debian.org/">Debian-based system</a>, a Makefile
target exists that installs the required packages on your build machine.</p>
<p>For other distributions, a Debian Docker image is available to use as
a starting point.</p>
<div class="section" id="debian-systems">
<h3>Debian Systems<a class="headerlink" href="#debian-systems" title="Permalink to this headline">¶</a></h3>
<p>The ONIE project maintains a Makefile target for the current stable
version of Debian.  This target requires the use of <code class="docutils literal notranslate"><span class="pre">sudo(8)</span></code>, since
package installation requires root privileges:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd build-config
$ sudo apt-get update
$ sudo apt-get install build-essential
$ make debian-prepare-build-host
</pre></div>
</div>
</div>
</div>
<div class="section" id="preparing-a-new-build-user-account">
<h2>Preparing a New Build User Account<a class="headerlink" href="#preparing-a-new-build-user-account" title="Permalink to this headline">¶</a></h2>
<p>The user account for compiling ONIE must have <code class="docutils literal notranslate"><span class="pre">/sbin</span></code> and <code class="docutils literal notranslate"><span class="pre">/usr/sbin</span></code>
in the <code class="docutils literal notranslate"><span class="pre">$PATH</span></code> environment variable.  As an example, when using the
<code class="docutils literal notranslate"><span class="pre">bash</span></code> shell add the following near the end of <code class="docutils literal notranslate"><span class="pre">$HOME/.bashrc</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">PATH</span><span class="o">=</span><span class="s2">&quot;/sbin:/usr/sbin:$PATH&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="machine-definition-files">
<h2>Machine Definition Files<a class="headerlink" href="#machine-definition-files" title="Permalink to this headline">¶</a></h2>
<p>In order to compile ONIE for a particular platform, you need the
platform’s machine definition, located in
<code class="docutils literal notranslate"><span class="pre">$ONIE_ROOT/machine/&lt;vendor&gt;/&lt;vendor&gt;_&lt;model&gt;</span></code>.</p>
<p>See the INSTALL file in <code class="docutils literal notranslate"><span class="pre">machine/&lt;vendor&gt;/&lt;vendor&gt;_&lt;model&gt;</span></code> for
additional information about a particular platform.</p>
</div>
<div class="section" id="cross-compiler-toolchain">
<h2>Cross-Compiler Toolchain<a class="headerlink" href="#cross-compiler-toolchain" title="Permalink to this headline">¶</a></h2>
<p>The ONIE build process generates and uses a cross-compiling toolchain
based on <a class="reference external" href="http://gcc.gnu.org/">gcc</a> and <a class="reference external" href="http://www.uclibc.org/">uClibc</a>.  The <a class="reference external" href="http://crosstool-ng.org/">crosstool-NG</a> project is used to manage the build
of the toolchain.</p>
<p>A number of packages are downloaded from the Internet by the ONIE
build process and cached for subsequent builds. You can set up your
own local mirror for these packages by setting up
<code class="docutils literal notranslate"><span class="pre">onie/build-config/local.make</span></code>.  See the sample file,
<code class="docutils literal notranslate"><span class="pre">onie/build-config/local.make.example</span></code>, and the <code class="docutils literal notranslate"><span class="pre">ONIE_MIRROR</span></code> and
<code class="docutils literal notranslate"><span class="pre">CROSSTOOL_ONIE_MIRROR</span></code> variables for examples.</p>
<p>Also see the FAQ entry <a class="reference internal" href="../faq/index.html#cache-packages"><span class="std std-ref">What is the easiest way to set up a build environment?</span></a>.</p>
</div>
<div class="section" id="cross-compiling-onie">
<h2>Cross-Compiling ONIE<a class="headerlink" href="#cross-compiling-onie" title="Permalink to this headline">¶</a></h2>
<p>To compile ONIE, first change directories to <code class="docutils literal notranslate"><span class="pre">build-config</span></code> and then
type <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">MACHINEROOT=../machine/&lt;vendor&gt;</span> <span class="pre">MACHINE=&lt;vendor&gt;_&lt;model&gt;</span>
<span class="pre">all</span></code>, specifying the target machine.  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd build-config
$ make -j4 MACHINEROOT=../machine/&lt;vendor&gt; MACHINE=&lt;vendor&gt;_&lt;model&gt; all
</pre></div>
</div>
<p>When complete, the following ONIE binaries are created in the <code class="docutils literal notranslate"><span class="pre">build/images</span></code>
directory:</p>
<span id="onie-build-products"></span><table border="1" class="docutils" id="id3">
<caption><span class="caption-text">ONIE Build Products</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">File</th>
<th class="head">Purpose</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>onie-&lt;platform&gt;-&lt;revision&gt;.bin</td>
<td>Raw binary, suitable for NOR flash programming</td>
</tr>
<tr class="row-odd"><td>onie-updater-&lt;platform&gt;-&lt;revision&gt;</td>
<td>ONIE updater, for use with the ONIE update mechanism</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="installing-the-onie-binary">
<h2>Installing the ONIE Binary<a class="headerlink" href="#installing-the-onie-binary" title="Permalink to this headline">¶</a></h2>
<p>See the <code class="docutils literal notranslate"><span class="pre">INSTALL</span></code> file in <code class="docutils literal notranslate"><span class="pre">machine/&lt;platform&gt;</span></code> for additional information
about how to install the ONIE binary on a particular platform.</p>
</div>
</div>
<div class="section" id="source-code-description">
<h1>Source Code Description<a class="headerlink" href="#source-code-description" title="Permalink to this headline">¶</a></h1>
<div class="section" id="source-code-layout">
<h2>Source Code Layout<a class="headerlink" href="#source-code-layout" title="Permalink to this headline">¶</a></h2>
<p>The ONIE source code layout is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>onie
├── build
│   └── docs
│       ├── doctrees
│       └── html
├── build-config
│   ├── arch
│   ├── conf
│   ├── make
│   └── scripts
├── contrib
│   └── onie-server
├── demo
├── docs
├── installer
├── machine
│   └──&lt;platform&gt;
│       ├── demo
│       ├── kernel
│       ├── test
│       └── u-boot
├── patches
│   ├── busybox
│   ├── crosstool-NG
│   ├── e2fsprogs
│   ├── kernel
│   └── u-boot
├── rootconf
│   └── default
│       ├── bin
│       ├── etc
│       │   ├── init.d
│       │   ├── rc3.d
│       │   └── rcS.d
│       ├── root
│       ├── sbin
│       └── scripts
├── test
│   ├── bin
│   ├── lib
│   └── tests
└── upstream
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Directory</th>
<th class="head">Purpose</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>build/docs</td>
<td>The final documentation is placed here.</td>
</tr>
<tr class="row-odd"><td>build-config</td>
<td>Builds are launched from this directory.  The main Makefile is here.</td>
</tr>
<tr class="row-even"><td>build-config/arch</td>
<td>Contains configurations for CPU architectures.</td>
</tr>
<tr class="row-odd"><td>build-config/conf</td>
<td>Contains configurations common to all platforms.</td>
</tr>
<tr class="row-even"><td>build-config/make</td>
<td>Contains makefile fragments included by the main Makefile.</td>
</tr>
<tr class="row-odd"><td>build-config/scripts</td>
<td>Scripts used by the build process.</td>
</tr>
<tr class="row-even"><td>contrib/onie-server</td>
<td>A standalone DHCP+HTTP Python-based server for simple installs.</td>
</tr>
<tr class="row-odd"><td>demo</td>
<td>A sample ONIE-compliant installer and OS. See <code class="docutils literal notranslate"><span class="pre">README.demo</span></code> for details.</td>
</tr>
<tr class="row-even"><td>docs</td>
<td>What you are reading now.</td>
</tr>
<tr class="row-odd"><td>installer</td>
<td>Files for building an ONIE update installer.</td>
</tr>
<tr class="row-even"><td>machine</td>
<td>Contains platform-specific machine definition files. More details below.</td>
</tr>
<tr class="row-odd"><td>patches</td>
<td>Patch sets applied to upstream projects, common to all platforms.</td>
</tr>
<tr class="row-even"><td>rootconf</td>
<td>Files copied into the final <code class="docutils literal notranslate"><span class="pre">sysroot</span></code> image. The main ONIE discovery
and execution application lives here.  More details below.</td>
</tr>
<tr class="row-odd"><td>test/bin</td>
<td>Contains the ONIE testing harness (Python unit test-based).</td>
</tr>
<tr class="row-even"><td>test/lib</td>
<td>Common Python classes for writing ONIE tests.</td>
</tr>
<tr class="row-odd"><td>test/tests</td>
<td>ONIE tests.</td>
</tr>
<tr class="row-even"><td>upstream</td>
<td>Local cache of upstream project tarballs.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="machine-definition-directory">
<h2>Machine Definition Directory<a class="headerlink" href="#machine-definition-directory" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">machine</span></code> directory layout is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>onie/machine
└── &lt;vendor&gt;
    └── &lt;vendor&gt;_&lt;model&gt;
        ├── demo
        │   └── platform.conf
        ├── INSTALL
        ├── kernel
        │   ├── config
        │   ├── platform-&lt;platform&gt;.patch
        │   └── series
        ├── machine.make
        ├── onie-rom.conf
        └── u-boot
            ├── platform-&lt;platform&gt;.patch
            └── series
</pre></div>
</div>
<p>The machine/nxp/nxp_p2020rbdpca directory contains all the files
necessary to build ONIE for the NXP P2020RBD-PCA reference platform.</p>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="65%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">File</th>
<th class="head">Purpose</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>demo/platform.conf</td>
<td>Platform-specific codes for creating the demo OS.</td>
</tr>
<tr class="row-odd"><td>INSTALL</td>
<td>Platform-specific ONIE installation instructions.</td>
</tr>
<tr class="row-even"><td>kernel/config</td>
<td>Additional kernel config appended to the core kernel config.</td>
</tr>
<tr class="row-odd"><td>kernel/platform-&lt;platform&gt;.patch</td>
<td>Kernel platform-specific patch(es).</td>
</tr>
<tr class="row-even"><td>kernel/series</td>
<td>List of kernel platform-specific patch(es) in order.</td>
</tr>
<tr class="row-odd"><td>machine.make</td>
<td>Platform-specific makefile.</td>
</tr>
<tr class="row-even"><td>onie-&lt;platform&gt;-rom.conf</td>
<td>Layout of the ONIE binary image(s).</td>
</tr>
<tr class="row-odd"><td>u-boot/platform-&lt;platform&gt;.patch</td>
<td>U-Boot platform-specific patch(es).</td>
</tr>
<tr class="row-even"><td>u-boot/series</td>
<td>List of U-Boot platform-specific patch(es) in order.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="rootconf-directory">
<h2><code class="docutils literal notranslate"><span class="pre">rootconf</span></code> Directory<a class="headerlink" href="#rootconf-directory" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">rootconf</span></code> directory layout is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>onie/rootconf
├── default
│   ├── bin
│   │   ├── discover
│   │   ├── exec_installer
│   │   ├── onie-nos-install
│   │   ├── onie-console
│   │   ├── support
│   │   ├── uninstaller
│   │   ├── onie-self-update
│   │   └── onie-stop
│   ├── etc
│   │   ├── init.d
│   │   │   ├── discover.sh
│   │   │   ├── dropbear.sh
│   │   │   ├── makedev.sh
│   │   │   ├── networking.sh
│   │   │   ├── rc
│   │   │   ├── rc.local
│   │   │   ├── syslogd.sh
│   │   │   └── telnetd.sh
│   │   ├── inittab
│   │   ├── issue
│   │   ├── issue.null
│   │   ├── mtab
│   │   ├── passwd
│   │   ├── profile
│   │   ├── rc3.d
│   │   │   ├── S10dropbear.sh -&gt; ../init.d/dropbear.sh
│   │   │   ├── S10telnetd.sh -&gt; ../init.d/telnetd.sh
│   │   │   └── S50discover.sh -&gt; ../init.d/discover.sh
│   │   ├── rcS.d
│   │   │   ├── S01makedev.sh -&gt; ../init.d/makedev.sh
│   │   │   ├── S05rc.local -&gt; ../init.d/rc.local
│   │   │   ├── S10networking.sh -&gt; ../init.d/networking.sh
│   │   │   └── S20syslogd.sh -&gt; ../init.d/syslogd.sh
│   │   └── syslog.conf
│   ├── root
│   ├── sbin
│   │   └── boot-failure
│   └── scripts
│       ├── functions
│       ├── udhcp4_net
│       └── udhcp4_sd
└── install
</pre></div>
</div>
<p>The contents of the <code class="docutils literal notranslate"><span class="pre">default</span></code> directory are copied to the <code class="docutils literal notranslate"><span class="pre">sysroot</span></code>
verbatim during the build process.</p>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">File</th>
<th class="head">Purpose</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>bin/discover</td>
<td>Image discovery script. Feeds into <code class="docutils literal notranslate"><span class="pre">exec_installer</span></code>.</td>
</tr>
<tr class="row-odd"><td>bin/exec_installer</td>
<td>Downloads and executes an installer image.</td>
</tr>
<tr class="row-even"><td>bin/onie-nos-install</td>
<td>CLI for explicitly specifying an NOS URL to use for the install.</td>
</tr>
<tr class="row-odd"><td>bin/support</td>
<td>CLI that generates a tarball of useful system information.</td>
</tr>
<tr class="row-even"><td>bin/uninstaller</td>
<td>Executed during uninstall operations.</td>
</tr>
<tr class="row-odd"><td>bin/onie-self-update</td>
<td>CLI for explicit specifying an ONIE update URL to use for the install.</td>
</tr>
<tr class="row-even"><td>bin/onie-stop</td>
<td>CLI for disabling discovery mode.  Terminates the discovery process.</td>
</tr>
<tr class="row-odd"><td>etc/init.d</td>
<td>Various initialization scripts.</td>
</tr>
<tr class="row-even"><td>etc/inittab</td>
<td>Standard Linux initialization script.</td>
</tr>
<tr class="row-odd"><td>etc/issue</td>
<td>Standard Linux logon customization file.</td>
</tr>
<tr class="row-even"><td>etc/mtab</td>
<td>Standard Linux file listing mounted file systems.</td>
</tr>
<tr class="row-odd"><td>etc/passwd</td>
<td>Standard Linux database file listing users authorized to access the system.</td>
</tr>
<tr class="row-even"><td>etc/profile</td>
<td>Standard Linux file listing users of the system.</td>
</tr>
<tr class="row-odd"><td>etc/rcS.d/S01makedev.sh</td>
<td>Creates the usual Linux kernel devices and file systems.</td>
</tr>
<tr class="row-even"><td>etc/rcS.d/S05rc.local</td>
<td>Standard Linux script to start <code class="docutils literal notranslate"><span class="pre">rc.local</span></code>.</td>
</tr>
<tr class="row-odd"><td>etc/rcS.d/S10networking.sh</td>
<td>Brings up the Ethernet management interface.</td>
</tr>
<tr class="row-even"><td>etc/rcS.d/S20syslogd.sh</td>
<td>Starts the <code class="docutils literal notranslate"><span class="pre">syslogd</span></code> service.</td>
</tr>
<tr class="row-odd"><td>etc/rc3.c/S10dropbear.sh</td>
<td>Starts the <code class="docutils literal notranslate"><span class="pre">dropbear</span></code> SSH service.</td>
</tr>
<tr class="row-even"><td>etc/rc3.d/S10telnetd.sh</td>
<td>Starts the <code class="docutils literal notranslate"><span class="pre">telnet</span></code> service.</td>
</tr>
<tr class="row-odd"><td>etc/rc3.d/S50discover.sh</td>
<td>Starts the ONIE discovery service.</td>
</tr>
<tr class="row-even"><td>install</td>
<td>The installer file.</td>
</tr>
<tr class="row-odd"><td>scripts</td>
<td>General helper scripts, sourced by other scripts.</td>
</tr>
</tbody>
</table>
</div>
</div>


          </div>
            
  <div class="footer-relations">
    
      <div class="pull-left">
        <a class="btn btn-default" href="index.html" title="previous chapter (use the left arrow)">For Developers</a>
      </div>
    
      <div class="pull-right">
        <a class="btn btn-default" href="debugging.html" title="next chapter (use the right arrow)">Basic Debugging</a>
      </div>
    </div>
    <div class="clearer"></div>
  
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="debugging.html" title="Basic Debugging"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="For Developers"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Open Network Install Environment  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >For Developers</a> &#187;</li> 
      </ul>
    </div>
<script type="text/javascript">
  $("#mobile-toggle a").click(function () {
    $("#left-column").toggle();
  });
</script>
<script type="text/javascript" src="../_static/js/bootstrap.js"></script>
  <div class="footer">
        &copy; Copyright 2013-2018, <a href="https://cumulusnetworks.com/">Cumulus Networks, Inc.</a>  All Rights Reserved.
  </div>
  </body>
</html>